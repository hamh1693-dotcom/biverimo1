<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bivermio Arama</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  #results { max-height: 300px; overflow-y: auto; }
</style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

<h1 class="text-3xl font-bold mb-6">Bivermio Arama</h1>

<div class="w-full max-w-xl mb-4">
  <input type="text" id="search" placeholder="Site veya uygulama ara..." 
    class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
</div>

<!-- Kategori filtreleri -->
<div class="w-full max-w-xl flex gap-2 mb-4 flex-wrap">
  <button class="filter-btn bg-blue-500 text-white px-3 py-1 rounded-lg" data-category="Yapay Zekâ">Yapay Zekâ</button>
  <button class="filter-btn bg-green-500 text-white px-3 py-1 rounded-lg" data-category="Sosyal Medya">Sosyal Medya</button>
  <button class="filter-btn bg-purple-500 text-white px-3 py-1 rounded-lg" data-category="Video">Video</button>
  <button class="filter-btn bg-yellow-500 text-white px-3 py-1 rounded-lg" data-category="İletişim">İletişim</button>
  <button class="filter-btn bg-gray-500 text-white px-3 py-1 rounded-lg" data-category="Tüm">Tüm</button>
</div>

<ul id="results" class="w-full max-w-xl bg-white rounded-lg shadow-md"></ul>

<!-- Popüler siteler -->
<div class="w-full max-w-xl mt-6">
  <h2 class="text-xl font-bold mb-2">Popüler Siteler</h2>
  <ul class="grid grid-cols-2 gap-2">
    <li><a href="https://chat.openai.com/" target="_blank" class="block p-2 bg-blue-100 rounded-lg">ChatGPT</a></li>
    <li><a href="https://www.youtube.com/" target="_blank" class="block p-2 bg-red-100 rounded-lg">YouTube</a></li>
    <li><a href="https://www.instagram.com/" target="_blank" class="block p-2 bg-pink-100 rounded-lg">Instagram</a></li>
    <li><a href="https://www.tiktok.com/" target="_blank" class="block p-2 bg-green-100 rounded-lg">TikTok</a></li>
  </ul>
</div>

<script>
const searchInput = document.getElementById('search');
const resultsList = document.getElementById('results');
let currentCategory = "Tüm";

const filterButtons = document.querySelectorAll('.filter-btn');
filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        currentCategory = btn.dataset.category;
        searchInput.dispatchEvent(new Event('input'));
    });
});

let timeout = null;

searchInput.addEventListener('input', () => {
    clearTimeout(timeout);
    timeout = setTimeout(async () => {
        const query = searchInput.value.trim();
        if (!query && currentCategory === "Tüm") {
            resultsList.innerHTML = '';
            return;
        }
        try {
            let url = `http://localhost:3000/search?q=${query}`;
            if (currentCategory !== "Tüm") url += `&category=${currentCategory}`;
            const res = await fetch(url);
            const data = await res.json();
            resultsList.innerHTML = data.map(item => `
                <li class="px-4 py-2 hover:bg-blue-100 cursor-pointer">
                  <a href="${item.url}" target="_blank" class="flex justify-between items-center">
                    <span class="font-medium">${item.name}</span>
                    <span class="text-sm text-gray-500">${item.category}</span>
                  </a>
                </li>
            `).join('');
        } catch (e) {
            resultsList.innerHTML = '<li class="px-4 py-2 text-red-500">Arama sırasında hata oluştu</li>';
        }
    }, 200);
});
</script>

</body>
</html
